# Local Network Monitor - PHP/MySQL Version

## Requirements
- XAMPP installed on your computer (for local development outside Docker)
- PHP 7.4 or higher
- MySQL/MariaDB
- Docker and Docker Compose (for production/containerized deployment)

## Installation Steps (Local XAMPP)

1.  **Start XAMPP**
    -   Open XAMPP Control Panel
    -   Start Apache and MySQL services

2.  **Place Files in htdocs**
    -   Create a new folder in `C:\xampp\htdocs\network-monitor\`
    -   Copy all files to this folder:
        -   `index.php` (main dashboard)
        -   `devices.php` (device management)
        -   `history.php` (ping history with filtering)
        -   `api.php` (AJAX API endpoints)
        -   `export.php` (CSV export functionality)
        -   `config.php` (configuration file)
        -   `database_setup.php` (database setup script)
        -   `README.md` (this file)
        -   `includes/license_check.php` (new license validation logic)
        -   `license_required.php` (page for invalid licenses)

3.  **Setup Database**
    -   Open your browser and go to: `http://localhost/network-monitor/database_setup.php`
    -   This will automatically create the database and tables

4.  **Access Application**
    -   Open your browser and go to: `http://localhost/network-monitor/`
    -   The network monitor application will load

## Installation Steps (Docker Compose)

1.  **Ensure Docker and Docker Compose are installed.**
2.  **Configure Environment Variables:**
    -   Edit `docker-compose.yml` to set `LICENSE_API_URL` and `LICENSE_KEY` for the `app` service.
    -   `LICENSE_API_URL`: This should point to the internal network address of your `sales_licensing_app` service (e.g., `http://sales_licensing_app:80/api/v1/validate-license`).
    -   `LICENSE_KEY`: This is the unique license key for this deployment, generated by your sales/licensing application.
3.  **Build and Run:**
    ```bash
    docker-compose up --build -d
    ```
4.  **Access Application:**
    -   Open your browser and go to: `http://localhost` (or the domain configured in your reverse proxy).

## Features
- Ping any host or IP address
- View ping history stored in MySQL database
- Monitor local network devices
- Real-time network status monitoring
- Device management (add, remove, check status)
- Historical data with filtering and pagination
- Export data to CSV
- Responsive design with Tailwind CSS
- AJAX-powered interface for smooth interactions
- **License Validation:** Integrates with an external licensing system.
- **License Enforcement:** Restricts access to the application if the license is invalid.

## Usage
1.  **Dashboard**: Main overview of network status and recent activity
2.  **Device Management**: Add/remove devices and check their status
3.  **Ping History**: View historical ping results with filtering and export options
4.  **Real-time Updates**: AJAX-powered updates without page refresh
5.  **License Status**: Check the validity of your product license in the header.

## Security Notes
- This is designed for local network use primarily.
- The database uses default XAMPP credentials (root with no password) or Docker environment variables.
- For production use, always change database credentials and ensure strong passwords.
- **License API:** Ensure your external License Validation API is secure and protected.

## Troubleshooting
1.  If ping doesn't work, ensure PHP can execute shell commands (especially in Docker).
2.  Check that Apache and MySQL are running (XAMPP) or Docker containers are healthy.
3.  Verify database connection in `config.php` if needed.
4.  Make sure your firewall allows ping requests.
5.  **License Validation Issues:**
    -   Check `LICENSE_API_URL` and `LICENSE_KEY` in `docker-compose.yml` or `config.php`.
    -   Ensure your `sales_licensing_app` Docker service is running and its API is accessible from the `app` service.
    -   Check PHP error logs for `curl` errors related to the license API call.
    -   If you are redirected to `license_required.php`, check the license key and API URL.